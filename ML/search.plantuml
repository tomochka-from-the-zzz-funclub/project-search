@startuml
skinparam backgroundColor #F9F9F9
skinparam BoxBackgroundColor #FFFFFF
skinparam BoxBorderColor #2B7A78
skinparam BoxFontColor #2B7A78
skinparam ParticipantBorderColor #3A506B
skinparam ParticipantFontColor #3A506B
skinparam ArrowColor #1C2541
skinparam DatabaseColor #5BC0BE
skinparam ActorFontColor #FF1654
skinparam ActorBorderColor #FF1654

actor "–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å" as User
box "Backend" #ADD8E6
    participant "Backend" as Backend
    participant "Elasticsearch" as Elasticsearch
    database "–•—Ä–∞–Ω–∏–ª–∏—â–µ –¥–∞–Ω–Ω—ã—Ö —Ñ–∏–ª—å–º–æ–≤" as DataStore
end box

box "ML —Å–∏—Å—Ç–µ–º–∞" #98FB98
    participant "–≠–º–±–µ–¥–¥–µ—Ä (E5)" as Embedder
    database "–í–µ–∫—Ç–æ—Ä–Ω–∞—è –ë–î (Milvus)" as Milvus
    participant "Reranker" as Reranker
end box

User -> Backend: 1) –ü–æ–∏—Å–∫–æ–≤—ã–π –∑–∞–ø—Ä–æ—Å
Backend -> Elasticsearch: 2) –ü–æ–∏—Å–∫–æ–≤—ã–π –∑–∞–ø—Ä–æ—Å
Elasticsearch ->  Backend: 3) –†–µ–∑—É–ª—å—Ç–∞—Ç –∑–∞–ø—Ä–æ—Å–∞
Backend -> DataStore: 4) –ò–∑–≤–ª–µ—á–µ–Ω–∏–µ –∫–∞–Ω–¥–∏–¥–∞—Ç–æ–≤ –Ω–∞ –æ—Å–Ω–æ–≤–µ —Ç–µ–∫—Å—Ç–∞
Elasticsearch --> Backend: 5) –°–ø–∏—Å–æ–∫ –∫–∞–Ω–¥–∏–¥–∞—Ç–æ–≤
Backend -> Embedder: 6) –≠–º–±–µ–¥–¥–∏—Ä–æ–≤–∞–Ω–∏–µ –∑–∞–ø—Ä–æ—Å–∞
Embedder -> Backend: 7) –í–µ–∫—Ç–æ—Ä–Ω—ã–µ —ç–º–±–µ–¥–¥–∏–Ω–≥–∏
Backend -> Milvus: üòç –ü–æ–∏—Å–∫ –ø–æ—Ö–æ–∂–∏—Ö –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤ –ø–æ –≤–µ–∫—Ç–æ—Ä–Ω—ã–º —ç–º–±–µ–¥–¥–∏–Ω–≥–∞–º
Milvus -> Backend: 9) –†–µ–∑—É–ª—å—Ç–∞—Ç—ã –ø–æ –≤–µ–∫—Ç–æ—Ä–Ω—ã–º —ç–º–±–µ–¥–¥–∏–Ω–≥–∞–º
Backend -> Reranker: 10) –£–Ω–∏–∫–∞–ª—å–Ω—ã–µ –∫–∞–Ω–¥–∏–¥–∞—Ç—ã –∏–∑ Elasticsearch –∏ Milvus
Reranker -> Backend: 11) –ò—Ç–æ–≥–æ–≤–æ–µ —Ä–∞–Ω–∂–∏—Ä–æ–≤–∞–Ω–∏–µ
Backend -> User: 12) –û—Ç–¥–∞—á–∞ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é

@enduml
